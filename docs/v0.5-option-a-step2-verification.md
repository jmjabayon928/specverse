# Option A Step 2 — Verification (EngineeringRevision for exports + DTOs)

## Tests

```bash
npx jest tests/utils/generateDatasheetExcel.test.ts --no-cache
npx jest tests/services/filledSheetUpdateUpsert.test.ts tests/api/sheetRevisions.test.ts tests/services/exportServiceExcelHeaders.test.ts --no-cache
```

## Manual export verification

1. **Backward compatibility (no EngineeringRevision):**
   - Open a filled sheet that has no `EngineeringRevision` / `ClientRevisionCode` set in DB (or leave them NULL).
   - Export as PDF and as Excel.
   - **Expect:** Filename contains numeric revision (e.g. `RevNo-1-`). Header/metadata “Revision” shows the numeric `revisionNum`. `revisionDate` unchanged.

2. **Prefer EngineeringRevision when present:**
   - Set `Sheets.EngineeringRevision` for a filled sheet (e.g. `'Rev-A'`) in DB; leave `ClientRevisionCode` as NULL if desired.
   - Export as PDF and as Excel.
   - **Expect:** Filename contains the engineering revision (e.g. `RevNo-Rev-A-`). Header/metadata “Revision” shows `Rev-A`. `revisionDate` still from `Sheets.RevisionDate`.

3. **ClientRevisionCode:** Not added to export layout in this step; no UI change. Optional follow-up can surface it if a suitable place exists.
