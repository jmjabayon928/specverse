# v0.5 — UOM expansion verification checklist (template → filled → persistence)

**Branch:** fix/v0.5-stabilization  
**Scope:** Verify expanded UOM (kN, N/mm², mA, ppm, mg/L, W) end-to-end. No redesign.

---

## 1. Manual verification steps

### 1.1 Template create

- [ ] Go to **Create template** (e.g. `/datasheets/templates/create`).
- [ ] Add at least one subsheet with fields. For each of the following UOMs, add one field and select that UOM from the dropdown:
  - **kN** (Force)
  - **N/mm²** (Pressure)
  - **mA** (Electrical)
  - **ppm** (Concentration)
  - **mg/L** (Concentration)
  - **W** (Power)
- [ ] Save the template. Note the template ID.

### 1.2 Template detail (UOM display)

- [ ] Open the **template detail** page (e.g. `/datasheets/templates/:id`).
- [ ] Confirm the **Subsheets** table shows the **UOM** column and that each field’s UOM is rendered correctly (kN, N/mm², mA, ppm, mg/L, W).
- [ ] Toggle **unit system** to USC (if available). For units with no conversion (kN, ppm, mA, etc.), the same unit string should still appear (no blank or error).

### 1.3 Filled sheet create from template

- [ ] Create a **filled sheet** from the template above (e.g. Create filled → choose template).
- [ ] On the form, confirm each field label shows the UOM in parentheses, e.g. `Label (kN)`, `Label (ppm)`.

### 1.4 Enter values and save

- [ ] Enter numeric values for the fields that have kN, N/mm², mA, ppm, mg/L, W.
- [ ] Save the filled sheet.

### 1.5 Persistence (reload)

- [ ] Reload the filled sheet detail page (e.g. `/datasheets/filled/:id`).
- [ ] Confirm:
  - Values are still correct.
  - UOM column still shows kN, N/mm², mA, ppm, mg/L, W (or USC equivalent only where conversion exists; otherwise same string).

---

## 2. If something breaks

- **UOM missing or wrong on template detail:** Check template detail API response and that `field.uom` is rendered (TemplateViewer).
- **UOM missing on filled create form:** Check that template fields passed to FilledSheetSubsheetForm include `uom` (from template’s InformationTemplates).
- **UOM missing after save/reload:** Check GET filled sheet detail response and InformationValues.UOM persistence (filledSheetService / valueSetQueries).
- **Strange character for N/mm²:** If `²` displays wrong, DB column may be VarChar instead of NVarChar; no schema change in v0.5, document for later.

---

## 3. Regression test (code)

- **Unit test:** `convertToUSC` returns the original value and unit when the unit is not in the conversion table (e.g. kN, ppm). See `tests/utils/unitConversionTable.test.ts`. This ensures expanded UOMs are passed through on template/filled viewer and export when USC is selected.
